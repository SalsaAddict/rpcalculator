var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),module=angular.module("rpcalc",["ngRoute","ngMessages","ngStorage"]),Example,RPCalculator,xyz;module.config(["$routeProvider",function(n){n.when("/workbook",{templateUrl:"Views/workbook.html",controller:RPCalculator.Workbook.Controller,controllerAs:"$ctrl"}).when("/worksheets/:index",{templateUrl:"Views/worksheet.html",controller:RPCalculator.Worksheet.Controller,controllerAs:"$ctrl"}).when("/judges/:index",{templateUrl:"Views/judges.html",controller:RPCalculator.Judges.Controller,controllerAs:"$ctrl"}).otherwise({redirectTo:"/workbook"}).caseInsensitiveMatch=!0}]);module.run(["$rootScope",function(n){n.textPattern=RPCalculator.textPattern;n.numberPattern=RPCalculator.numberPattern;n.vclass=function(n,t,i){t===void 0&&(t="is-valid");i===void 0&&(i="is-invalid");var r={};return t!==null&&Object.defineProperty(r,t,{get:function(){return n.$valid},enumerable:!0}),i!==null&&Object.defineProperty(r,i,{get:function(){return n.$invalid},enumerable:!0}),r}}]),function(n){n.workbook={title:"Skating System Example",worksheets:[{title:"Simple Example",judges:[{name:"John"},{name:"BeyoncÃ©"},{name:"Paul"},{name:"Kelly"},{name:"George"},{name:"Michelle"},{name:"Ringo"}],competitors:[]},{title:"Intermediate Example",judges:[],competitors:[]},{title:"Complex Example",judges:[],competitors:[]},]}}(Example||(Example={})),function(n){"use strict";function t(n){return angular.isUndefined(n)?!0:n===null?!0:angular.isArray(n)?n.length===0:angular.isObject(n)?angular.toJson(n)===angular.toJson({}):String(n).trim()===""?!0:isNaN(n)?!0:!1}function i(n,i){return t(n)?i:n}function r(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}n.maxJudges=7;n.maxCompetitors=8;n.textPattern="(^[\\w\\s-]+$)";n.numberPattern="(^\\d+$)";n.isBlank=t;n.ifBlank=i;n.swap=r}(RPCalculator||(RPCalculator={})),function(n){"use strict";function t(t){var i=new RegExp(n.numberPattern);if(i.test(t))return parseInt(i.exec(t)[1],10)}var r,i,u;n.toInt=t,function(t){var r=function(){function t(n,t){this.$localStorage=n;this.$location=t}return t.prototype.go=function(n,t){n===void 0&&(n="/workbook");t>=0&&(n+="/"+t);this.$location.path(n)},Object.defineProperty(t.prototype,"workbook",{get:function(){return this.$localStorage.workbook=n.ifBlank(this.$localStorage.workbook,Example.workbook),this.$localStorage.workbook},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return angular.isUndefined(this.workbook.title)&&(this.workbook.title="New Workbook"),this.workbook.title},set:function(n){this.workbook.title=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worksheets",{get:function(){return angular.isArray(this.workbook.worksheets)||(this.workbook.worksheets=[]),this.workbook.worksheets},enumerable:!0,configurable:!0}),t.prototype.validateJudges=function(n){return!this.judgesValidationError(n)},t.prototype.judgesValidationError=function(t){return n.isBlank(t)||!angular.isArray(t)||t.length<3?"There must be at least 3 judges":t.length>n.maxJudges?"There cannot be more than "+n.maxJudges+" judges":t.length%2==0?"There must be an odd number of judges":void 0},t.$inject=["$localStorage","$location"],t}(),i;t.Service=r;i=function(){function n(n){this.$wb=n}return n.$inject=["$wb"],n}();t.Controller=i}(r=n.Workbook||(n.Workbook={})),function(n){var i=function(){function n(n,t,i,r,u){var f=this;this.$scope=n;this.$wb=t;this.$route=i;this.$routeParams=r;this.$window=u;this.judges=angular.copy(this.worksheet.judges);(angular.isUndefined(this.index)||angular.isUndefined(this.$wb.worksheets[this.index]))&&this.$wb.go();n.$on("$destroy",n.$on("$routeChangeStart",function(n){f.form&&f.form.$dirty&&(n.preventDefault(),f.$window.alert("Please save or undo your changes before continuing."))}))}return Object.defineProperty(n.prototype,"form",{get:function(){return this.$scope.form},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return t(this.$routeParams.index)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"worksheet",{get:function(){return this.$wb.worksheets[this.index]},enumerable:!0,configurable:!0}),n.$inject=["$scope","$wb","$route","$routeParams","$window"],n}(),r;n.BaseController=i;r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(i);n.Controller=r}(i=n.Worksheet||(n.Worksheet={})),function(t){var r=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"valid",{get:function(){return this.form.$valid&&this.$wb.validateJudges(this.judges)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"invalid",{get:function(){return!this.valid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this.form.$error.required?"Every judge must be given a name.":this.$wb.judgesValidationError(this.judges)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canAdd",{get:function(){return this.judges.length<n.maxJudges},enumerable:!0,configurable:!0}),i.prototype.add=function(){angular.isArray(this.worksheet.judges)||(this.worksheet.judges=[]);this.judges.push({name:null});this.form.$setDirty()},Object.defineProperty(i.prototype,"canRemove",{get:function(){return this.judges.length>3},enumerable:!0,configurable:!0}),i.prototype.remove=function(n){this.judges.splice(n,1);this.form.$setDirty()},i.prototype.moveUp=function(t){n.swap(this.judges,t,t-1);this.form.$setDirty()},i.prototype.moveDown=function(t){n.swap(this.judges,t,t+1);this.form.$setDirty()},i.prototype.save=function(){this.$wb.worksheets[this.index].judges=angular.copy(this.judges);this.form.$setPristine()},i.prototype.undo=function(){this.judges=angular.copy(this.worksheet.judges);this.form.$setPristine()},i}(i.BaseController);t.Controller=r}(u=n.Judges||(n.Judges={}))}(RPCalculator||(RPCalculator={}));module.service("$wb",RPCalculator.Workbook.Service);